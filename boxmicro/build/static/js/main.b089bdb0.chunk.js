(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,o,t){e.exports=t(41)},20:function(e,o,t){},24:function(e,o,t){},41:function(e,o,t){"use strict";t.r(o);var n=t(0),a=t.n(n),r=t(4),l=t.n(r),i=(t(20),t(12)),s=t.n(i),c=t(14),p=t(6),d=t(7),g=t(9),u=t(8),m=t(10),h=(t(24),t(5)),f=t(2),v=function(e){function o(e){var t;return Object(p.a)(this,o),(t=Object(g.a)(this,Object(u.a)(o).call(this,e))).markerProps={},t.initMap=t.initMap.bind(Object(h.a)(Object(h.a)(t))),t.markers=[],t.toMapData=t.props.toMapData,console.log("I came from the server",t.props.toBeMappedFromServer),t}return Object(m.a)(o,e),Object(d.a)(o,[{key:"initMap",value:function(e,o){var t=this;console.log("cooooooords",this.props.toBeMappedFromServer);var n=e.google,a=new n.maps.drawing.DrawingManager({drawingMode:null,drawingControl:!0,drawingControlOptions:{position:n.maps.ControlPosition.TOP_CENTER,drawingModes:[n.maps.drawing.OverlayType.POLYGON]},markerOptions:{icon:"https://developers.google.com/maps/documentation/javascript/examples/full/images/parking.png"},polygonOptions:{fillColor:"#00FF0"},map:o});a.setDrawingMode(n.maps.drawing.OverlayType.POLYGON);var r=document.getElementById("searchWindow"),l=new n.maps.places.SearchBox(r);console.log("searchBox is ",l);var i=[];l.addListener("places_changed",function(){console.log("places changed.");var e=l.getPlaces();if(0!==e.length){i.forEach(function(e){e.setMap(null)}),i=[],console.log(e);var t=new n.maps.LatLngBounds;e.forEach(function(e){if(e.geometry){var a={url:e.icon,size:new n.maps.Size(71,71),origin:new n.maps.Point(0,0),anchor:new n.maps.Point(17,34),scaledSize:new n.maps.Size(25,25)};i.push(new n.maps.Marker({map:o,icon:a,title:e.name,position:e.geometry.location})),e.geometry.viewport?t.union(e.geometry.viewport):t.extend(e.geometry.location)}else console.log("Returned place contains no geometry")}),o.fitBounds(t)}});var s=[],c=[];a.addListener("polygoncomplete",function(e){n.maps.event.addListener(e,"click",function(t){console.log(e),e.setMap(o)});var a=e.getPath().getArray();console.log("coordinates",a),s.push(e),s.length>1&&(console.log("changing previous polygon color"),setTimeout(function(){s[s.length-2].setMap(o)},10)),console.log("the polygon array includes: ",s),console.info("The coordinates that make up the polygon are");var r=[],l="<br>DIMENSIONS: <br>";a.length>1&&(a.forEach(function(e,o){if(console.log(e.lat(),e.lng(),o),r.push([a[o].lat(),a[o].lng()]),o<a.length-1){var t=d(a[o].lat(),a[o].lng(),a[o+1].lat(),a[o+1].lng());l=l+(1e3*t*3.2808).toFixed(2)+" feet  <br> by ",console.log(t.toFixed(4),"km in length")}else{var n=d(a[o].lat(),a[o].lng(),a[0].lat(),a[0].lng());l=l+(1e3*n*3.2808).toFixed(2)+" feet"}}),t.props.sendPolygonToServer(r)),console.log("dimensionsString ",l);var i=10.7639*n.maps.geometry.spherical.computeArea(e.getPath());document.getElementById("sqfeet").value=i.toFixed(3)+" Square Feet",console.log("Its area in square meters",n.maps.geometry.spherical.computeArea(e.getPath())),console.log(i," is the square feet.");var p=new n.maps.Marker({position:a[0],map:o,title:"Dimensions"});console.log("before markers",t.state),c.push(p),p.setMap(o),console.log(t.props.toBeMappedFromServer),setTimeout(function(){p.setMap(null)},2e3);var g=new n.maps.InfoWindow({content:"SQUARE FEET:<br>"+(10.7639*n.maps.geometry.spherical.computeArea(e.getPath())).toFixed()+l});p.addListener("click",function(){g.open(f.Map,p)}),e.addListener("mouseover",function(){console.log("hovering"),p.setMap(o),g.open(f.Map,p),setTimeout(function(){g.close()},3e3)}),g.open(f.Map,p)}),a.polygonOptions.fillColor="#00FF00",document.getElementById("isLegal").addEventListener("click",function(){console.log("inside init and islegal is clicked."),a.polygonOptions.fillColor="#00FF00"}),document.getElementById("isProhibited").addEventListener("click",function(){console.log("inside init and prohibited is clicked."),a.polygonOptions.fillColor="#ff0000"});var p=function(e){return e*Math.PI/180},d=function(e,o,t,n){var a=p(t-e),r=p(n-o);e=p(e),t=p(t);var l=Math.sin(a/2)*Math.sin(a/2)+Math.sin(r/2)*Math.sin(r/2)*Math.cos(e)*Math.cos(t);return 6371*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))},g=this.props.toBeMappedFromServer.map(function(e){console.log("pgn",e);var o=[];return e.coords.forEach(function(e){console.log(e),o.push({lat:e[0],lng:e[1]})}),o.push({lat:e.coords[0][0],lng:e.coords[0][1]}),o});console.log(g),g.forEach(function(e){console.log("polygon",e),new n.maps.Polygon({path:e,geodesic:!0,strokeColor:"#FF0000",fillColor:"#FF0000",strokeOpacity:1,strokeWeight:2}).setMap(o)})}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement("h2",null,"Square Feet"),a.a.createElement("input",{type:"text",id:"sqfeet",placeholder:"value goes here"}),a.a.createElement("br",null),a.a.createElement("br",null)),a.a.createElement("h2",null,"Mark Legal or Prohibited"),a.a.createElement("div",{id:"legals"},a.a.createElement("input",{type:"radio",name:"legal",value:"legal",id:"isLegal",defaultChecked:!0})," ","Legal",a.a.createElement("br",null),a.a.createElement("input",{type:"radio",name:"legal",value:"prohibited",id:"isProhibited"})," ","Prohibited",a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement("br",null))),a.a.createElement("br",null),a.a.createElement("div",{id:""},a.a.createElement("label",{style:{color:"green",fontSize:"20pt"}},"Search Bar"),a.a.createElement("br",null),a.a.createElement("input",{style:{border:"solid green 6px"},type:"text",id:"searchWindow",placeholder:"search for a city"})),a.a.createElement(f.Map,{style:{width:"80%",height:"80%",marginLeft:"10%",border:"solid green 8px"},google:window.google,onReady:this.initMap,onClick:this.onMapClicked,sendPolygonToServer:this.sendPolygonToServer,toMapData:this.data,initialCenter:{lat:47.6062,lng:-122.3321},zoom:15,scaleControl:!0,eMapApiInternals:!0}))}}]),o}(a.a.Component),y=Object(f.GoogleApiWrapper)({apiKey:"AIzaSyAKWE1JinLb5yLSoxHiEjiq1CMuOqbx_s4",libraries:["drawing","places"]})(v),M=function(e){function o(e){var t;return Object(p.a)(this,o),(t=Object(g.a)(this,Object(u.a)(o).call(this,e))).sendPolygonToServer=function(){var e=Object(c.a)(s.a.mark(function e(o){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/gps",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:{data:o}})});case 2:t=e.sent,console.log("response",t.data);case 4:case"end":return e.stop()}},e,this)}));return function(o){return e.apply(this,arguments)}}(),t.data=[],t.state={toBeMappedFromServer:[]},t}return Object(m.a)(o,e),Object(d.a)(o,[{key:"componentDidMount",value:function(){var e=this;console.log("componentDidMount",this.state),fetch("/gps").then(function(e){return e.json()}).then(function(o){console.log("data",o.data),e.setState({toBeMappedFromServer:o.data})})}},{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement("h1",null,"This is the app.js page"),a.a.createElement(y,{sendPolygonToServer:this.sendPolygonToServer,toMapData:this.data,toBeMappedFromServer:this.state.toBeMappedFromServer}))}}]),o}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(a.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[15,2,1]]]);
//# sourceMappingURL=main.b089bdb0.chunk.js.map